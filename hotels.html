<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Explore Hotels</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="font-sans antialiased bg-gray-50">
  <!-- Header -->
  <div id="header"></div>

  <!-- Main Section -->
  <section class="container mx-auto py-8 px-4 md:px-16">
    <!-- Trip.com Embed -->
    <h2 class="text-2xl font-bold mb-6">Search Flights</h2>
    <div class="mb-8">
      <iframe
        src="https://www.trip.com/partners/ad/S683258?Allianceid=5582984&SID=127216986&trip_sub1=booking-hotel"
        frameborder="0"
        style="width: 100%; height: 250px; border: none;"
        title="Search Flights with Trip.com"
        allowfullscreen>
      </iframe>
    </div>

    <div>
      <ul class="flex border-b" id="hotel-tabs">
        <!-- Tabs will be dynamically injected -->
      </ul>
    </div>

    <!-- Hotels Container -->
    <div id="hotels-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6">
      <!-- Hotel Cards will be dynamically injected -->
    </div>
  </section>

  <!-- Footer -->
  <div id="footer"></div>

  <!-- Scripts -->
  <script src="assets/js/scripts.js"></script>
  <script>
  document.addEventListener("DOMContentLoaded", () => {
    // Fetch and Render Hotels
    fetch("components/datajson/hotels.json")
      .then(response => response.json())
      .then(data => {
        const tabsContainer = document.getElementById("hotel-tabs");
        const hotelsContainer = document.getElementById("hotels-container");

        // Get unique locations for tabs
        const locations = [...new Set(data.hotels.map(hotel => hotel.location))];

        // Generate Tabs
        locations.forEach((location, index) => {
          const activeClass = index === 0 ? "text-blue-500 border-blue-500" : "text-gray-500 border-transparent";
          tabsContainer.innerHTML += `
            <li class="-mb-px mr-1">
              <button class="bg-transparent inline-block py-2 px-4 text-sm font-semibold border-b-2 ${activeClass}" data-location="${location}">
                ${location}
              </button>
            </li>
          `;
        });

        // Initial Render for the first location
        renderHotels(data.hotels.filter(hotel => hotel.location === locations[0]));

        // Tab Click Event
        tabsContainer.addEventListener("click", e => {
          if (e.target.tagName === "BUTTON") {
            const selectedLocation = e.target.getAttribute("data-location");

            // Update Active Tab Styling
            document.querySelectorAll("#hotel-tabs button").forEach(tab => {
              tab.classList.remove("text-blue-500", "border-blue-500");
              tab.classList.add("text-gray-500", "border-transparent");
            });
            e.target.classList.add("text-blue-500", "border-blue-500");

            // Render Hotels for Selected Location
            const filteredHotels = data.hotels.filter(hotel => hotel.location === selectedLocation);
            renderHotels(filteredHotels);
          }
        });

        // Render Hotels Function
        function renderHotels(hotels) {
          hotelsContainer.innerHTML = hotels.map(hotel => `
            <a href="${hotel.link}" target="_blank" class="block bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-shadow duration-200">
              <img src="${hotel.image}" alt="${hotel.name}" class="rounded-lg mb-4 w-full h-[150px] object-cover">
              <div class="flex items-center justify-between mb-2">
                <span class="text-gray-800 font-semibold">${hotel.name}</span>
                <span class="text-yellow-500 text-sm">${'‚≠ê'.repeat(hotel.stars)}</span>
              </div>
              <p class="text-gray-500 text-sm mb-1">${hotel.reviews} reviews</p>
              <p class="text-gray-500 text-sm mb-2">${hotel.description}</p>
              <p class="text-gray-800 font-bold">From ${hotel.currency}${hotel.price}</p>
            </a>
          `).join('');
        }
      })
      .catch(error => console.error("Error loading hotels:", error));
  });
</script>


</body>
</html>
